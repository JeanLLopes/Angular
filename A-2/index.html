<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="ListaPessoas">
<head>
    <title>Lista de Pessoas</title>
    <link href="/Content/bootstrap.min.css" rel="stylesheet" />
    <style>
        .selecionado{background-color: lightgoldenrodyellow}
    </style>


    <script src="/Scripts/angular.min.js"></script>
    <script>
        angular.module("ListaPessoas", []);
        angular.module("ListaPessoas").controller("ListaPessoasController", function($scope) {

            //NG-BIND = RETORNA ITENS DA CONTROLLER PARA A VIEW
            $scope.app = "Lista de Pessoas Cadastradas";

            //NG-REPEAT = PERMITE NAVEGAR POR LISTA CRIADAS
            $scope.pessoas = [
                { nome: "Pessoa1", telefone: "9989899", cor:"red" },
                { nome: "Pessoa2", telefone: "9989899", cor: "red" },
                { nome: "Pessoa3", telefone: "9989899", cor: "red" },
                { nome: "Pessoa4", telefone: "9989899", cor: "red" }
            ];

            //CRIANDO UM ARRAY DE SEXOS
            $scope.sexos = [
                { nome: "Masculino", codigo: "M", descricao: "Pessoa Sexo Masculino" },
                { nome: "Feminino", codigo: "F", descricao: "Pessoa Sexo Feminino" },
                { nome: "Outros", codigo: "O", descricao: "Pessoa Com Sexo Não Classificado" }
            ];

            //NG-CLASS




            //NG-MODEL = PEGA DADOS DA VIEW E DEFINE NA VIEW

            //NG-CLICK = DISPARA UM EVENTO CLICK NA VIEW
            $scope.adicionarPessoa = function(pessoa) {
                $scope.pessoas.push(angular.copy(pessoa));
                delete $scope.pessoa;
            }

            $scope.apagarPessoa = function(pessoasDeletar) {
                //var pessoasSelecionadas = pessoasDeletar.filter(function (pessoas) {
                //    if (pessoas.selecionado) {
                //        return pessoas;
                //    }
                //});

                //console.log(pessoasSelecionadas);


                $scope.pessoas = pessoasDeletar.filter(function (pessoas) {
                    if (!pessoas.selecionado) {
                        return pessoas;
                    }
                });
            }


            //FUNCTION PODEM SER ATRIBUIDAS AO NG-DISABLED
            $scope.PessoaSelecionada = function (pessoas) {

                //AO SELECIONAR QUALQUER PESSOA DA LISTA 
                //ELE VAI RETORNAR NO LOG SE EXISTE OU NAO 
                //UM CONTATO SELECIONADO
                return pessoas.some(function(pessoa) {
                    return pessoa.selecionado;
                });
            }
        });
    </script>
</head>
<body ng-controller="ListaPessoasController" class="container">
    <section class="jumbotron text-center">
        <header>
            <h3>{{app}}</h3>
        </header>
        <br />
        <div class="container">
            <table class="table table-hover" ng-show="pessoas.length > 0">
                <tr>
                    <th>Selecionado</th>
                    <th>Nome</th>
                    <th>Telefone</th>
                    <th>Sexo</th>
                    <th></th>
                </tr>

                <tr ng-class="{selecionado: pessoa.selecionado}" ng-repeat="pessoa in pessoas">
                    <td><input type="checkbox" ng-model="pessoa.selecionado" /></td>
                    <td>{{pessoa.nome}}</td>
                    <td>{{pessoa.telefone}}</td>
                    <td>{{pessoa.sexo.nome}}</td>
                    <td><div style="width: 20px; height: 20px;" ng-style="{'background-color': pessoa.cor}"></div></td>
                </tr>
            </table>
        </div>
        <hr />
        <div class="container form-group">
            <input type="text" ng-model="pessoa.nome" placeholder="Insira seu Nome" class="form-control" /><br />
            <input type="text" ng-model="pessoa.telefone" placeholder="insira seu Telefone" class="form-control" /><br />

            <!--<select class="form-control" ng-model="pessoa.sexo" ng-options="sexo.codigo as sexo.nome for sexo in sexos">
                    <option value="">Selecione um Sexo</option>
                </select>-->
            <!--<select class="form-control" ng-model="pessoa.sexo" ng-options="sexo.nome group by sexo.descricao for sexo in sexos">
                    <option value="">Selecione um Sexo</option>
                </select>-->

            <select class="form-control" ng-model="pessoa.sexo" ng-options="sexo.nome for sexo in sexos">
                <option value="">Selecione um Sexo</option>
            </select>
        </div>
        <div class="container form-group">
            <button class="btn btn-primary btn-block" ng-click="adicionarPessoa(pessoa)" ng-disabled="!pessoa.nome || !pessoa.telefone">Adicionar Pessoa</button>
            <button class="btn btn-danger btn-block" ng-click="apagarPessoa(pessoas)" ng-if="PessoaSelecionada(pessoas)">Deletar Pessoas</button>
            <!--<button class="btn btn-danger btn-block" ng-click="apagarPessoa(pessoas)" ng-hide="PessoaSelecionada(pessoas)">Deletar Pessoas</button>-->
            <!--<button class="btn btn-danger btn-block" ng-click="apagarPessoa(pessoas)" ng-show="PessoaSelecionada(pessoas)">Deletar Pessoas</button>-->
        </div>
    </section>

    <!--
        PODEMOS PEGAR TAMBEM O RODAPE DA PEGINA
        DE OUTRO ARQUIVO
    -->
    <div ng-include="'footer.html'"></div>
</body>
</html>
